{{- with (index .Attributes "filename") -}}
  {{- $href := index $.Attributes "href" -}}
  {{- if $href -}}
    {{- $href = partial "docs/links/portable-link" (dict "Page" $.PageInner "Destination" $href) -}}
  {{- end -}}
<div class="book-codeblock-filename">
  <a {{ with $href }}href="{{ . }}"{{ end }}>{{ . }}</a>
</div>
{{- end -}}

<div class="book-codeblock" data-lang="{{ .Type }}">
  <div class="code-actions">

    <button class="btn-code-copy code-action" onclick="copyCode(this)">
      <i class="fa-solid fa-copy"></i>Copy
    </button>

    <span class="code-language code-action">{{ .Type | default "text" }}</span>

  </div>
  {{- (transform.HighlightCodeBlock . .Options).Wrapped -}}
</div>
