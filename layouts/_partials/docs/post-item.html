<article class="post-item">

  <div class="post-meta">
    <time datetime="{{ .Date.Format "2006-01-02" }}">
      {{ .Date.Format "2006년 01월 02일" }}
    </time>
    {{ if .Params.categories }}
    <div class="post-categories">
      {{ $categories := .Params.categories }}
      {{ $typeStr := printf "%T" $categories }}
      {{ if or (eq $typeStr "[]interface {}") (eq $typeStr "[]string") }}
        {{ range $index, $category := $categories }}
          {{ $categoryPath := "" }}
          {{ range $i, $c := (first (add $index 1) $categories) }}
            {{ if eq $i 0 }}
              {{ $categoryPath = $c | urlize }}
            {{ else }}
              {{ $categoryPath = printf "%s/%s" $categoryPath ($c | urlize) }}
            {{ end }}
          {{ end }}
          <a href="{{ "/categories/" | relURL }}{{ $categoryPath }}/" class="category">
            {{ if eq $index 0 }}
              <i class="fa-solid fa-folder"></i> {{ $category }}
            {{ else }}
              <i class="fa-solid fa-file"></i> {{ $category }}
            {{ end }}
          </a>
        {{ end }}
      {{ else }}
        <a href="{{ "/categories/" | relURL }}{{ $categories | urlize }}/" class="category">{{ $categories }}</a>
      {{ end }}
    </div>
    {{ end }}
  </div>

  <div class="post-content-area{{ if .Params.cover }} has-cover{{ end }}">
    <div class="post-text-area">
      <h2 class="post-title">
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </h2>

      {{ $summary := "" }}
      {{ if .Description }}
        {{ $summary = .Description }}
      {{ else if .Summary }}
        {{ $summary = .Summary }}
      {{ end }}
      {{ if $summary }}
      <div class="post-summary">
        {{ $summary | plainify | truncate 148 }}
      </div>
      <div class="post-summary-mobile">
        {{ $summary | plainify | truncate 72 }}
      </div>
      {{ end }}

      {{ if .Params.tags }}
      <div class="post-tags">
        {{ range first 5 .Params.tags }}
        <a href="{{ "/tags/" | relURL }}{{ . | urlize }}/" class="tag">#{{ . }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>

    {{ if .Params.cover }}
    <div class="post-cover">
      {{- $coverImage := "" -}}
      {{- if reflect.IsMap .Params.cover -}}
        {{- if .Params.cover.image -}}
          {{- $coverImage = .Params.cover.image -}}
        {{- end -}}
      {{- else -}}
        {{- $coverImage = .Params.cover -}}
      {{- end -}}
      {{- if $coverImage -}}
      <img src="{{ $coverImage | absURL }}" alt="Cover Image" class="post-cover-img">
      {{- end -}}
    </div>
    {{ end }}
  </div>

</article>